     1: // *******************************************************************
     2: //             MCE Starter Kit Student Advanced
     3: //              Autor: Fernando R. Tagliaferri
     4: //----------------------------------------------------------------------------------------------------
     5: 
     6: 
     7: 
     8: 
     9: //PIC18F46K20
    10: #pragma config FOSC = HS, FCMEN = OFF, IESO = OFF                       // CONFIG1H
    11: #pragma config PWRT = OFF, BOREN = OFF, BORV = 30                        // CONFIG2L
    12: #pragma config WDTEN = OFF, WDTPS = 32768                                    // CONFIG2H
    13: #pragma config MCLRE = ON, LPT1OSC = OFF, PBADEN = OFF, CCP2MX = PORTC       // CONFIG3H
    14: #pragma config STVREN = ON, LVP = OFF, XINST = OFF                           // CONFIG4L
    15: #pragma config CP0 = OFF, CP1 = OFF, CP2 = OFF, CP3 = OFF                   // CONFIG5L
    16: #pragma config CPB = OFF, CPD = OFF                                         // CONFIG5H
    17: #pragma config WRT0 = OFF, WRT1 = OFF, WRT2 = OFF, WRT3 = OFF                // CONFIG6L
    18: #pragma config WRTB = OFF, WRTC = OFF, WRTD = OFF                            // CONFIG6H
    19: #pragma config EBTR0 = OFF, EBTR1 = OFF, EBTR2 = OFF, EBTR3 = OFF           // CONFIG7L
    20: #pragma config EBTRB = OFF                                                   // CONFIG7H
    21: /* Includes */
    22: #include <htc.h>
    23: #include "p18f46k20.h"
    24: #include "delays.h"
    25: #include "stdlib.h" //Libreria que contiene la funcion itoa
    26: //#include "Demo4620v1.h"
    27: #include "addup.h"
    28: 
    29: 
    30: /* Programa Princicpal ***/
    31: //#pragma code
    32: void main(void)
    33: {
    34: 
    35:    ADCON1=0x0F;         // Configuramos todos los pines 
    36:                         // como digitales
    37:    ANSEL = 0;
    38:    ANSELH = 0;
    39:    
    40:    TRISB = 0b00000000;
    41:    LATBbits.LATB7 = 1;
    42:    LATBbits.LATB6 = ~LATBbits.LATB7;
    43: 
    44: /*Programa Principal*/
    45:     while (1)
    46:    {
    47:       LATBbits.LATB7 = ~LATBbits.LATB7; // complemento Bit
    48:       Delay1KTCYx(1000);      // Delay 200 x 1000 = 200,000 ciclos;
    49:                               // 200ms @ 4MHz
    50:       LATBbits.LATB6 = ~LATBbits.LATB6;
    51:       LATBbits.LATB0 = LATBbits.LATB6;
    52:       addup(1, 1);
    53:       increment(2);
    54:    }   
    55:    
    56:    
    57: }